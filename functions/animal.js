var animalsArray = [
	{
		"image":"./img/animals/ant.png",
		"name":"ant",
		"voice":"./img/audioanimal/ant.mp3"
	},		
	{
		"image":"./img/animals/bear.png",
		"name":"bear",
		"voice":"./img/audioanimal/bear.mp3"
    },
    {
		"image":"./img/animals/bee.png",
		"name":"bee",
		"voice":"./img/audioanimal/bee.mp3"
    },
    {
		"image":"./img/animals/bird.png",
		"name":"bird",
		"voice":"./img/audioanimal/bird.mp3"
	},
	{
		"image":"./img/animals/butterfly.png",
		"name":"butterfly",
		"voice":"./img/audioanimal/butterfly.mp3"
	},
	{
		"image":"./img/animals/camel.png",
		"name":"camel",
		"voice":"./img/audioanimal/camel.mp3"
	},
	{
		"image":"./img/animals/cat.png",
		"name":"cat",
		"voice":"./img/audioanimal/cat.mp3"
	},
	{
		"image":"./img/animals/caterpillar.png",
		"name":"caterpillar",
		"voice":"./img/audioanimal/caterpillar.mp3"
	},
	{
		"image":"./img/animals/chicken.png",
		"name":"chicken",
		"voice":"./img/audioanimal/chicken.mp3"
	},
	{
		"image":"./img/animals/cow.png",
		"name":"cow",
		"voice":"./img/audioanimal/cow.mp3"
	},
	{
		"image":"./img/animals/crab.png",
		"name":"crab",
		"voice":"./img/audioanimal/crab.mp3"
	},
	{
		"image":"./img/animals/crocodile.png",
		"name":"crocodile",
		"voice":"./img/audioanimal/crocodile.mp3"
	},
	{
		"image":"./img/animals/deer.png",
		"name":"deer",
		"voice":"./img/audioanimal/deer.mp3"
	},
	{
		"image":"./img/animals/dog.png",
		"name":"dog",
		"voice":"./img/audioanimal/dog.mp3"
	},
	{
		"image":"./img/animals/donkey.png",
		"name":"donkey",
		"voice":"./img/audioanimal/donkey.mp3"
	},
	{
		"image":"./img/animals/duck.png",
		"name":"duck",
		"voice":"./img/audioanimal/duck.mp3"
	},
	{
		"image":"./img/animals/elephant.png",
		"name":"elephant",
		"voice":"./img/audioanimal/elephant.mp3"
	},
	{
		"image":"./img/animals/fish.png",
		"name":"fish",
		"voice":"./img/audioanimal/fish.mp3"
	},
	{
		"image":"./img/animals/frog.png",
		"name":"frog",
		"voice":"./img/audioanimal/frog.mp3"
	},
	{
		"image":"./img/animals/giraffe.png",
		"name":"giraffe",
		"voice":"./img/audioanimal/giraffe.mp3"
	},
	{
		"image":"./img/animals/goat.png",
		"name":"goat",
		"voice":"./img/audioanimal/goat.mp3"
	},
	{
		"image":"./img/animals/hamster.png",
		"name":"hamster",
		"voice":"./img/audioanimal/hamster.mp3"
	},
	{
		"image":"./img/animals/hedgehog.png",
		"name":"hedgehog",
		"voice":"./img/audioanimal/hedgehog.mp3"
	},
	{
		"image":"./img/animals/horse.png",
		"name":"horse",
		"voice":"./img/audioanimal/horse.mp3"
	},
	{
		"image":"./img/animals/jellyfish.png",
		"name":"jellyfish",
		"voice":"./img/audioanimal/jellyfish.mp3"
	},
	{
		"image":"./img/animals/ladybird.png",
		"name":"ladybird",
		"voice":"./img/audioanimal/ladybird.mp3"
	},
	{
		"image":"./img/animals/sheep.png",
		"name":"sheep",
		"voice":"./img/audioanimal/sheep.mp3"
	},
	{
		"image":"./img/animals/lion.png",
		"name":"lion",
		"voice":"./img/audioanimal/lion.mp3"
	},
	{
		"image":"./img/animals/mole.png",
		"name":"mole",
		"voice":"./img/audioanimal/mole.mp3"
	},
	{
		"image":"./img/animals/monkey.png",
		"name":"monkey",
		"voice":"./img/audioanimal/monkey.mp3"
	},
	{
		"image":"./img/animals/mouse.png",
		"name":"mouse",
		"voice":"./img/audioanimal/mouse.mp3"
	},
	{
		"image":"./img/animals/octopus.png",
		"name":"octopus",
		"voice":"./img/audioanimal/octopus.mp3"
	},
	{
		"image":"./img/animals/owl.png",
		"name":"owl",
		"voice":"./img/audioanimal/owl.mp3"
	},
	{
		"image":"./img/animals/panda.png",
		"name":"panda",
		"voice":"./img/audioanimal/panda.mp3"
	},
	{
		"image":"./img/animals/penguin.png",
		"name":"penguin",
		"voice":"./img/audioanimal/penguin.mp3"
	},
	{
		"image":"./img/animals/pig.png",
		"name":"pig",
		"voice":"./img/audioanimal/pig.mp3"
	},
	{
		"image":"./img/animals/pony.png",
		"name":"pony",
		"voice":"./img/audioanimal/pony.mp3"
	},
	{
		"image":"./img/animals/rabbit.png",
		"name":"rabbit",
		"voice":"./img/audioanimal/rabbit.mp3"
	},
	{
		"image":"./img/animals/seahorse.png",
		"name":"seahorse",
		"voice":"./img/audioanimal/seahorse.mp3"
	},
	{
		"image":"./img/animals/snake.png",
		"name":"snake",
		"voice":"./img/audioanimal/snake.mp3"
	},
	{
		"image":"./img/animals/spider.png",
		"name":"spider",
		"voice":"./img/audioanimal/spider.mp3"
	},
	{
		"image":"./img/animals/starfish.png",
		"name":"starfish",
		"voice":"./img/audioanimal/starfish.mp3"
	},
	{
		"image":"./img/animals/stingray.png",
		"name":"stingray",
		"voice":"./img/audioanimal/stingray.mp3"
	},
	{
		"image":"./img/animals/tiger.png",
		"name":"tiger",
		"voice":"./img/audioanimal/tiger.mp3"
	},
	{
		"image":"./img/animals/turkey.png",
		"name":"turkey",
		"voice":"./img/audioanimal/turkey.mp3"
	},
	{
		"image":"./img/animals/turtle.png",
		"name":"turtle",
		"voice":"./img/audioanimal/turtle.mp3"
	},
	{
		"image":"./img/animals/unicorn.png",
		"name":"unicorn",
		"voice":"./img/audioanimal/unicorn.mp3"
	},
	{
		"image":"./img/animals/whale.png",
		"name":"whale",
		"voice":"./img/audioanimal/whale.mp3"
	},
	{
		"image":"./img/animals/worm.png",
		"name":"worm",
		"voice":"./img/audioanimal/worm.mp3"
	},
	{
		"image":"./img/animals/zebra.png",
		"name":"zebra",
		"voice":"./img/audioanimal/zebra.mp3"
	},
	{
		"image":"./img/animals/pigeon.png",
		"name":"pigeon",
		"voice":"./img/audioanimal/pigeon.mp3"
	},
	{
		"image":"./img/animals/dinosaur.png",
		"name":"dinosaur",
		"voice":"./img/audioanimal/dinosaur.mp3"
	},
	{
		"image":"./img/animals/dragon.png",
		"name":"dragon",
		"voice":"./img/audioanimal/dragon.mp3"
	},
	{
		"image":"./img/animals/kangaroo.png",
		"name":"kangaroo",
		"voice":"./img/audioanimal/kangaroo.mp3"
	},
	{
		"image":"./img/animals/clownfish.png",
		"name":"clownfish",
		"voice":"./img/audioanimal/clownfish.mp3"
	},
	{
		"image":"./img/animals/rhinoceros.png",
		"name":"rhinoceros",
		"voice":"./img/audioanimal/rhinoceros.mp3"
	},
	{
		"image":"./img/animals/toad.png",
		"name":"toad",
		"voice":"./img/audioanimal/toad.mp3"
	},
	{
		"image":"./img/animals/puppy.png",
		"name":"puppy",
		"voice":"./img/audioanimal/puppy.mp3"
	},
	{
		"image":"./img/animals/hippo.png",
		"name":"hippo",
		"voice":"./img/audioanimal/hippo.mp3"
	},
	{
		"image":"./img/animals/rat.png",
		"name":"rat",
		"voice":"./img/audioanimal/rat.mp3"
	},
	{
		"image":"./img/animals/ostrich.png",
		"name":"ostrich",
		"voice":"./img/audioanimal/ostrich.mp3"
	},
	{
		"image":"./img/animals/peacock.png",
		"name":"peacock",
		"voice":"./img/audioanimal/peacock.mp3"
	}
];
function playAudio(i) {
	var url = animalsArray[i]["voice"];
	console.log('hello');
	new Audio(url).play();
  }
  function animals() {
	$('#div4').html('');
	var $title = $('<h1 class = "titleh2">Pick an animal and learn how to spell its name</h1>')
	$('#div4').append($title);
	var $animals =  $('<div id="colors" class="row animalslist"></div>');
	var index = animalsArray.length - 1;
    while(index >= 0){
		var audio = animalsArray[index]["voice"];
		console.log(audio);
		var $animal = $('<div class=" column"><img id="'+index+'"onclick="playAudio(this.id)" style="background-color : white" class=" imggame animal" src="'+animalsArray[index]["image"]+'" alt="Colors" ></div>');
		var $text = $('<h2 class="animalname">'+animalsArray[index]["name"]+'</h2>');
		$animal.append($text);
		$animals.prepend($animal);
		index--;
	}

	$('#div4').append($animals);
} 

var animalarray = [1,2,3,4];
var animalId = undefined;
function animalfunc() {
	$('#div4').html(''); 
	var ilength = animalsArray.length - 1;
	animalId = Math.floor(Math.random() * ilength);
	var arr = [animalsArray[animalId]["name"]];  // Le bouton cliqué est ajouté en premier dans le tableau arr
	 var newarr = [];
	
	 //Ajout des autres couleurs dans le tableau newarr
	 for (var i = 0; i < animalsArray.length; i++) {
	 	newarr.push(animalsArray[i]["name"]);
	 };
	  console.log(arr);
	  console.log(newarr);
	 newarr.splice(animalId, 1);  // Retirer la couleur sélectionnée du tableau newarr
	 console.log(newarr);
	// Ajouter des couleurs aléatoires de newarr dans arr jusqu'à ce qu'il y ait 4 éléments
	for (var i = newarr.length - 1; arr.length < 4; i--) {
		var index = Math.floor(Math.random() * i);
		arr.push(newarr[index]);
		newarr.splice(index, 1);
	};
	console.log(arr);
	$('#colorsguess').html('');  // Vider le div 'colorsguess' avant d'ajouter de nouveaux boutons
	$('.answer').remove();  // Retirer les anciennes réponses si elles existent
	var $div4 = $('#div4');  // Div où le bouton cliqué sera ajouté
	var index = arr.length - 1;
	var $color1 = $('<div class=" column"><img id="'+animalId+'"onclick="playAudio(this.id)" style="background-color : white" class=" imggame animal" src="'+animalsArray[animalId]["image"]+'" alt="Animals" ></div>');
	while (index >= 0) {
		if(index == 0){
			$div4.prepend($color1);   ////////////  à revoir
		}
		var i = Math.floor(Math.random() * (index + 1));
		var $color = $('<button class="btn-space" id="' + index + '" onclick="animalguess(this.id)"><h1>' + arr[i] + '</h1></button>');
		animalarray[index] = arr[i];  // Stocker la couleur dans le tableau colorsarray
		arr.splice(i, 1);  // Retirer l'élément ajouté du tableau arr
		$div4.append($color); // ajouter le bouton au div4
		index--;
	}
	var $b1 = $('<a href="#div4"><button class="guess btn1" onclick="myGameAnimal.displayGame()"><h1>Play</h1></button></a>');
	var $b2 = $('<a href="index.html"><button class="guess btn2"><h1>Exit</h1></button></a>');
	$div4.prepend($b1);
	$div4.prepend($b2);
}
function animalguess(id) {
	$('.answer').remove();
	var $div = $('#div4');
	 var $colors =  $('<div id="animationContainer"></div>');
	// Logique pour vérifier la réponse
	if (animalsArray[animalId]["name"] === animalarray[id]) {
		generateConfetti();
	} else {
		// Crée l'élément audio pour le son fail
		const failSound = new Audio('audio/basarszlk.mp3');
		failSound.play(); // Joue le son d'applaudissements
	}	

	$div.append($colors);
}
function Game(name,array,displayGame) {
	var instance={};
	instance.name = name;
	instance.array = array;
	instance.displayGame = displayGame;
	return instance;
};
var myGameAnimal = new Game('Colors', animalarray, animalfunc);